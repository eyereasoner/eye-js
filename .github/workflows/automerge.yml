name: Enable automerge on dependabot PRs

on:
  pull_request_target:

jobs:
  automerge:
    name: Enable automerge on dependabot PRs
    runs-on: ubuntu-latest
    if: ${{ github.actor == 'dependabot[bot]' }}
    steps:
      - if: ${{ !contains(github.head_ref, 'dependabot/npm_and_yarn/swipl-wasm-') }}
        run: gh pr merge ${{ github.head_ref }} --auto --squash
      
      - if: ${{ contains(github.head_ref, 'dependabot/npm_and_yarn/swipl-wasm-') }}
        run: |
          gh pr merge ${{ github.head_ref }} --auto --squash --body " 
          
          "
